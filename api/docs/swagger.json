{
    "swagger": "2.0",
    "info": {
        "description": "API for Jewish prayer times calculation and publisher management",
        "title": "Zmanim Lab API",
        "termsOfService": "https://zmanim-lab.com/terms",
        "contact": {
            "name": "Zmanim Lab Support",
            "email": "support@zmanim-lab.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "1.0"
    },
    "host": "localhost:8080",
    "basePath": "/api/v1",
    "paths": {
        "/admin/publishers": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns a list of all publishers with their status, regardless of verification",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "List all publishers (admin)",
                "responses": {
                    "200": {
                        "description": "List of publishers",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "403": {
                        "description": "Forbidden - admin role required",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Creates a new publisher entity. Admin-created publishers are auto-approved.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Create publisher (admin)",
                "parameters": [
                    {
                        "description": "Publisher data (name required, email/website/bio optional)",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "object"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created publisher",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "409": {
                        "description": "Conflict - publisher name already exists",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/admin/publishers/{id}/verify": {
            "put": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Verifies a pending publisher, sends approval email, and creates/updates Clerk user",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Verify publisher (admin)",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Publisher ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Verified publisher",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Publisher not found",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/admin/stats": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns usage statistics including publisher counts and calculation metrics",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Get system statistics (admin)",
                "responses": {
                    "200": {
                        "description": "System statistics",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/api/v1/admin/registry/day-types": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Get all day types (admin)",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/internal_handlers.DayType"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/admin/registry/requests": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Get all zman registry requests",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Filter by status",
                        "name": "status",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/internal_handlers.ZmanRegistryRequest"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/admin/registry/requests/{id}": {
            "put": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Review zman registry request",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Request ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Review body",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.ReviewZmanRequestBody"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.ZmanRegistryRequest"
                        }
                    }
                }
            }
        },
        "/api/v1/admin/registry/tags": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Get all zman tags (admin)",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/internal_handlers.ZmanTag"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/admin/registry/time-categories": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Get time categories (admin)",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "additionalProperties": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/admin/registry/zmanim": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Get all master zmanim (admin)",
                "parameters": [
                    {
                        "type": "boolean",
                        "description": "Include hidden zmanim",
                        "name": "include_hidden",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by time category",
                        "name": "category",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/internal_handlers.AdminMasterZman"
                            }
                        }
                    }
                }
            },
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Create master zman (admin)",
                "parameters": [
                    {
                        "description": "Create request",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.AdminCreateMasterZmanRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.AdminMasterZman"
                        }
                    }
                }
            }
        },
        "/api/v1/admin/registry/zmanim/{id}": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Get master zman by ID (admin)",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Zman ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.AdminMasterZmanDetail"
                        }
                    }
                }
            },
            "put": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Update master zman (admin)",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Zman ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Update request",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.AdminUpdateMasterZmanRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.AdminMasterZman"
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Admin"
                ],
                "summary": "Delete master zman (admin)",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Zman ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/admin/registry/zmanim/{id}/toggle-visibility": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Toggle zman visibility (admin)",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Zman ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.AdminMasterZman"
                        }
                    }
                }
            }
        },
        "/api/v1/admin/zman-requests/{id}": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Get zman registry request by ID",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Request ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.ZmanRegistryRequest"
                        }
                    }
                }
            }
        },
        "/api/v1/admin/zman-requests/{id}/tags": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Get tags for zman request",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Request ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/internal_handlers.ZmanRequestTagResponse"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/admin/zman-requests/{id}/tags/{tagRequestId}/approve": {
            "post": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Approve tag request",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Request ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Tag Request ID",
                        "name": "tagRequestId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.ApprovedTagResponse"
                        }
                    }
                }
            }
        },
        "/api/v1/admin/zman-requests/{id}/tags/{tagRequestId}/reject": {
            "post": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "Reject tag request",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Request ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Tag Request ID",
                        "name": "tagRequestId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/publisher/zman-requests": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher Zmanim"
                ],
                "summary": "Get publisher's zman requests",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/api/v1/publisher/zmanim": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher Zmanim"
                ],
                "summary": "Add zman from master registry",
                "parameters": [
                    {
                        "description": "Create request",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.CreateZmanFromRegistryRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.PublisherZman"
                        }
                    }
                }
            }
        },
        "/api/v1/publisher/zmanim/deleted": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher Zmanim"
                ],
                "summary": "Get deleted zmanim",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/internal_handlers.DeletedZman"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/publisher/zmanim/{zmanKey}": {
            "delete": {
                "tags": [
                    "Publisher Zmanim"
                ],
                "summary": "Soft delete a zman",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Zman key",
                        "name": "zmanKey",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/publisher/zmanim/{zmanKey}/history": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher Zmanim"
                ],
                "summary": "Get version history for a zman",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Zman key",
                        "name": "zmanKey",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/internal_handlers.ZmanVersion"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/publisher/zmanim/{zmanKey}/history/{version}": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher Zmanim"
                ],
                "summary": "Get specific version of a zman",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Zman key",
                        "name": "zmanKey",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "Version number",
                        "name": "version",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.ZmanVersion"
                        }
                    }
                }
            }
        },
        "/api/v1/publisher/zmanim/{zmanKey}/permanent": {
            "delete": {
                "tags": [
                    "Publisher Zmanim"
                ],
                "summary": "Permanently delete a zman",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Zman key",
                        "name": "zmanKey",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/publisher/zmanim/{zmanKey}/restore": {
            "post": {
                "tags": [
                    "Publisher Zmanim"
                ],
                "summary": "Restore a deleted zman",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Zman key",
                        "name": "zmanKey",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.PublisherZman"
                        }
                    }
                }
            }
        },
        "/api/v1/publisher/zmanim/{zmanKey}/rollback": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher Zmanim"
                ],
                "summary": "Rollback zman to previous version",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Zman key",
                        "name": "zmanKey",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Rollback request",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.RollbackZmanRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.PublisherZman"
                        }
                    }
                }
            }
        },
        "/api/v1/registry/day-types": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Registry"
                ],
                "summary": "Get all day types",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Filter by parent type",
                        "name": "parent",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/internal_handlers.DayType"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/registry/primitives": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Registry"
                ],
                "summary": "Get all astronomical primitives",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/internal_handlers.AstronomicalPrimitive"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/registry/primitives/grouped": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Registry"
                ],
                "summary": "Get astronomical primitives grouped by category",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/internal_handlers.AstronomicalPrimitivesGrouped"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/registry/tags": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Registry"
                ],
                "summary": "Get all zman tags",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Filter by tag type",
                        "name": "type",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/internal_handlers.ZmanTag"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/registry/zmanim": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Registry"
                ],
                "summary": "Get all master zmanim",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Filter by time category",
                        "name": "category",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Search by name",
                        "name": "search",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by tag name",
                        "name": "tag",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/internal_handlers.MasterZman"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/registry/zmanim/events": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Registry"
                ],
                "summary": "Get event zmanim grouped by category (candles, havdalah, etc.)",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/definitions/internal_handlers.MasterZman"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/registry/zmanim/grouped": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Registry"
                ],
                "summary": "Get master zmanim grouped by time category",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Filter by day types (comma-separated, e.g., erev_shabbos,motzei_shabbos)",
                        "name": "day_types",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/internal_handlers.MasterZmanimGrouped"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/registry/zmanim/request": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher Zmanim"
                ],
                "summary": "Request new zman for master registry",
                "parameters": [
                    {
                        "description": "Request body",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.CreateZmanRegistryRequestBody"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.ZmanRegistryRequest"
                        }
                    }
                }
            }
        },
        "/api/v1/registry/zmanim/validate-key": {
            "get": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Registry"
                ],
                "summary": "Validate zman key availability",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Zman key to validate",
                        "name": "key",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.ValidateZmanKeyResponse"
                        }
                    }
                }
            }
        },
        "/api/v1/registry/zmanim/{zmanKey}": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Registry"
                ],
                "summary": "Get master zman by key",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Zman key",
                        "name": "zmanKey",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.MasterZman"
                        }
                    }
                }
            }
        },
        "/api/v1/registry/zmanim/{zmanKey}/day-types": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Registry"
                ],
                "summary": "Get applicable day types for a zman",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Zman key",
                        "name": "zmanKey",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/internal_handlers.DayType"
                            }
                        }
                    }
                }
            }
        },
        "/cities": {
            "get": {
                "description": "Search for cities by name with optional filtering by country, region, or continent. Uses fuzzy matching for typo tolerance.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Cities"
                ],
                "summary": "Search cities",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Search query (min 2 chars for fuzzy match)",
                        "name": "search",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "ISO 3166-1 alpha-2 country code",
                        "name": "country_code",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Region/state name",
                        "name": "region",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Continent code (AF, AS, EU, NA, OC, SA, AN)",
                        "name": "continent_code",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "Max results (default 10, max 100)",
                        "name": "limit",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of matching cities",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_models.CitySearchResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid parameters",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/cities/nearby": {
            "get": {
                "description": "Finds the nearest city to the given GPS coordinates using PostGIS spatial queries",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Cities"
                ],
                "summary": "Find nearest city",
                "parameters": [
                    {
                        "type": "number",
                        "description": "Latitude (-90 to 90)",
                        "name": "lat",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "number",
                        "description": "Longitude (-180 to 180)",
                        "name": "lng",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Nearest city with distance",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid coordinates",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/cities/{cityId}/publishers": {
            "get": {
                "description": "Returns all publishers that have coverage for the specified city (via city, region, country, or continent level)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Cities"
                ],
                "summary": "Get publishers for city",
                "parameters": [
                    {
                        "type": "string",
                        "description": "City ID",
                        "name": "cityId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Publishers serving this city",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_models.PublishersForCityResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/continents": {
            "get": {
                "description": "Returns all continents with their city counts",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Geography"
                ],
                "summary": "List continents",
                "responses": {
                    "200": {
                        "description": "List of continents",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/countries": {
            "get": {
                "description": "Returns all countries with their city counts, optionally filtered by continent",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Geography"
                ],
                "summary": "List countries",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Filter by continent code or name",
                        "name": "continent",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of countries",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/dsl/preview": {
            "post": {
                "description": "Calculates the result of a zmanim formula for a specific date and location, returning the time and calculation breakdown",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "DSL"
                ],
                "summary": "Preview DSL formula",
                "parameters": [
                    {
                        "description": "Formula, date, and location",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.DSLPreviewRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Calculation result with breakdown",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/internal_handlers.DSLPreviewResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid request or formula error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Location not found",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/dsl/preview-week": {
            "post": {
                "description": "Calculates a zmanim formula for 7 consecutive days starting from the specified date, including Hebrew dates and Shabbat/holiday markers",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "DSL"
                ],
                "summary": "Preview DSL formula for a week",
                "parameters": [
                    {
                        "description": "Formula, start date, and location",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.DSLPreviewWeekRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Weekly calculation results",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/internal_handlers.DSLPreviewWeekResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Location not found",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/dsl/validate": {
            "post": {
                "description": "Validates a zmanim formula written in the DSL syntax, returning any errors and dependencies",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "DSL"
                ],
                "summary": "Validate DSL formula",
                "parameters": [
                    {
                        "description": "Formula to validate",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.DSLValidateRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Validation result",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/internal_handlers.DSLValidateResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/health": {
            "get": {
                "description": "Returns the health status of the API and database connection",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "System"
                ],
                "summary": "Health check",
                "responses": {
                    "200": {
                        "description": "Service healthy",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "503": {
                        "description": "Service unavailable",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/publisher/accessible": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns a list of publishers the authenticated user has access to",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher"
                ],
                "summary": "Get accessible publishers",
                "responses": {
                    "200": {
                        "description": "List of accessible publishers",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/publisher/cache": {
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Clears all cached zmanim calculations for the authenticated publisher",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher"
                ],
                "summary": "Invalidate publisher cache",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Publisher ID",
                        "name": "X-Publisher-Id",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cache invalidated",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Publisher not found",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/publisher/coverage": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns all geographic coverage areas configured for the authenticated publisher",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Coverage"
                ],
                "summary": "Get publisher coverage areas",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Publisher ID",
                        "name": "X-Publisher-Id",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of coverage areas",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_models.PublisherCoverageListResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Publisher not found",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Adds a new geographic coverage area (continent, country, region, or city level)",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Coverage"
                ],
                "summary": "Create coverage area",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Publisher ID",
                        "name": "X-Publisher-Id",
                        "in": "header",
                        "required": true
                    },
                    {
                        "description": "Coverage area configuration",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_models.PublisherCoverageCreateRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created coverage area",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_models.PublisherCoverage"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid request or duplicate coverage",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/publisher/coverage/{id}": {
            "put": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Updates an existing coverage area's priority or active status",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Coverage"
                ],
                "summary": "Update coverage area",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Publisher ID",
                        "name": "X-Publisher-Id",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Coverage area ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Fields to update",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_models.PublisherCoverageUpdateRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Updated coverage area",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_models.PublisherCoverage"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Coverage area not found",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Removes a geographic coverage area from the publisher",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Coverage"
                ],
                "summary": "Delete coverage area",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Publisher ID",
                        "name": "X-Publisher-Id",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Coverage area ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Deletion confirmation",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Coverage area not found",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/publisher/dashboard": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns a summary of the publisher's profile, algorithm, coverage, and analytics",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher"
                ],
                "summary": "Get dashboard summary",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Publisher ID",
                        "name": "X-Publisher-Id",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Dashboard summary",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Publisher not found",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/publisher/profile": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns the authenticated publisher's profile",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher"
                ],
                "summary": "Get publisher profile",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Publisher ID (optional, uses default if not specified)",
                        "name": "X-Publisher-Id",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Publisher profile",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_models.Publisher"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Publisher not found",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            },
            "put": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Updates the authenticated publisher's profile information",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher"
                ],
                "summary": "Update publisher profile",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Publisher ID",
                        "name": "X-Publisher-Id",
                        "in": "header"
                    },
                    {
                        "description": "Profile update data",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_models.PublisherProfileUpdateRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Updated publisher profile",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_models.Publisher"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Publisher not found",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/publisher/zmanim": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns all zmanim formulas for a publisher. With optional date/location params, returns filtered zmanim with calculated times and day context.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher Zmanim"
                ],
                "summary": "Get publisher zmanim",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Publisher ID",
                        "name": "X-Publisher-Id",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Date for filtering and calculation (YYYY-MM-DD)",
                        "name": "date",
                        "in": "query"
                    },
                    {
                        "type": "number",
                        "description": "Latitude for time calculation (required with date)",
                        "name": "latitude",
                        "in": "query"
                    },
                    {
                        "type": "number",
                        "description": "Longitude for time calculation (required with date)",
                        "name": "longitude",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Timezone for calculation (defaults to UTC)",
                        "name": "timezone",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of zmanim or filtered response with day context",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Publisher not found",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Creates a new custom zman formula for the publisher",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher Zmanim"
                ],
                "summary": "Create custom zman",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Publisher ID",
                        "name": "X-Publisher-Id",
                        "in": "header",
                        "required": true
                    },
                    {
                        "description": "Zman data",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.CreateZmanRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created zman",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/internal_handlers.PublisherZman"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid request or duplicate key",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/publisher/zmanim/{zmanKey}": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Returns a single zman formula by its unique key",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher Zmanim"
                ],
                "summary": "Get single zman",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Publisher ID",
                        "name": "X-Publisher-Id",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Zman key",
                        "name": "zmanKey",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Zman details",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/internal_handlers.PublisherZman"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Zman not found",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            },
            "put": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Updates an existing zman formula's properties",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publisher Zmanim"
                ],
                "summary": "Update zman",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Publisher ID",
                        "name": "X-Publisher-Id",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Zman key",
                        "name": "zmanKey",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Fields to update",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handlers.UpdateZmanRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Updated zman",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/internal_handlers.PublisherZman"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Zman not found",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/publishers": {
            "get": {
                "description": "Returns a paginated list of verified publishers, optionally filtered by region or search query",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publishers"
                ],
                "summary": "List publishers",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Page number (default 1)",
                        "name": "page",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "Items per page (default 20, max 100)",
                        "name": "page_size",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by region ID",
                        "name": "region_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Search query",
                        "name": "q",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "Filter to publishers with published algorithms",
                        "name": "has_algorithm",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of publishers",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/publishers/{id}": {
            "get": {
                "description": "Returns details for a specific publisher by ID",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Publishers"
                ],
                "summary": "Get publisher",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Publisher ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Publisher details",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_models.Publisher"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Publisher not found",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/regions": {
            "get": {
                "description": "Returns regions/states with their city counts, filtered by country code or search query",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Geography"
                ],
                "summary": "List regions",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Filter by ISO country code (required if search not provided)",
                        "name": "country_code",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Search query for region name (min 2 chars)",
                        "name": "search",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "Max results (default 20, max 100)",
                        "name": "limit",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of regions",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Either country_code or search required",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/zmanim": {
            "get": {
                "description": "Calculates Jewish prayer times (zmanim) for a specific city and date, optionally using a publisher's custom algorithm",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Zmanim"
                ],
                "summary": "Get zmanim for a city",
                "parameters": [
                    {
                        "type": "string",
                        "description": "City ID from the cities database",
                        "name": "cityId",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Publisher ID for custom algorithm (uses default if not specified)",
                        "name": "publisherId",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Date in YYYY-MM-DD format (defaults to today)",
                        "name": "date",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Calculated zmanim with formula details",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/internal_handlers.ZmanimWithFormulaResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid parameters",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "City not found",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            },
            "post": {
                "description": "Calculates zmanim using raw latitude/longitude coordinates. Prefer the GET /zmanim endpoint with cityId for better accuracy.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Zmanim"
                ],
                "summary": "Calculate zmanim by coordinates (legacy)",
                "parameters": [
                    {
                        "description": "Coordinates and date",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_models.ZmanimRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Calculated zmanim",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/internal_handlers.ZmanimWithFormulaResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/internal_handlers.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "error": {
                                            "$ref": "#/definitions/internal_handlers.APIError"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "github_com_jcom-dev_zmanim-lab_internal_dsl.CalculationStep": {
            "type": "object",
            "properties": {
                "step": {
                    "type": "string"
                },
                "value": {
                    "type": "string"
                }
            }
        },
        "github_com_jcom-dev_zmanim-lab_internal_dsl.ValidationError": {
            "type": "object",
            "properties": {
                "column": {
                    "type": "integer"
                },
                "line": {
                    "type": "integer"
                },
                "message": {
                    "type": "string"
                },
                "suggestion": {
                    "type": "string"
                }
            }
        },
        "github_com_jcom-dev_zmanim-lab_internal_models.City": {
            "type": "object",
            "properties": {
                "continent": {
                    "description": "Continent code (AF, AN, AS, EU, NA, OC, SA)",
                    "type": "string"
                },
                "country": {
                    "type": "string"
                },
                "country_code": {
                    "type": "string"
                },
                "display_name": {
                    "description": "Computed display field",
                    "type": "string"
                },
                "elevation": {
                    "description": "Elevation in meters above sea level",
                    "type": "integer"
                },
                "id": {
                    "type": "string"
                },
                "latitude": {
                    "type": "number"
                },
                "longitude": {
                    "type": "number"
                },
                "name": {
                    "type": "string"
                },
                "population": {
                    "type": "integer"
                },
                "region": {
                    "type": "string"
                },
                "region_type": {
                    "type": "string"
                },
                "timezone": {
                    "type": "string"
                }
            }
        },
        "github_com_jcom-dev_zmanim-lab_internal_models.CitySearchResponse": {
            "type": "object",
            "properties": {
                "cities": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_models.City"
                    }
                },
                "total": {
                    "type": "integer"
                }
            }
        },
        "github_com_jcom-dev_zmanim-lab_internal_models.Publisher": {
            "type": "object",
            "properties": {
                "bio": {
                    "type": "string"
                },
                "clerk_user_id": {
                    "type": "string"
                },
                "contact_email": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "is_verified": {
                    "type": "boolean"
                },
                "logo_data": {
                    "description": "Base64 encoded logo image",
                    "type": "string"
                },
                "logo_url": {
                    "type": "string"
                },
                "name": {
                    "description": "Publisher name is the organization name",
                    "type": "string"
                },
                "status": {
                    "type": "string"
                },
                "subscriber_count": {
                    "type": "integer"
                },
                "updated_at": {
                    "type": "string"
                },
                "website": {
                    "type": "string"
                }
            }
        },
        "github_com_jcom-dev_zmanim-lab_internal_models.PublisherCoverage": {
            "type": "object",
            "properties": {
                "city_id": {
                    "type": "string"
                },
                "city_name": {
                    "type": "string"
                },
                "continent_code": {
                    "type": "string"
                },
                "country": {
                    "type": "string"
                },
                "country_code": {
                    "type": "string"
                },
                "coverage_level": {
                    "description": "continent, country, region, city",
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "display_name": {
                    "description": "Computed fields for display",
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "is_active": {
                    "type": "boolean"
                },
                "priority": {
                    "type": "integer"
                },
                "publisher_id": {
                    "type": "string"
                },
                "region": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                }
            }
        },
        "github_com_jcom-dev_zmanim-lab_internal_models.PublisherCoverageCreateRequest": {
            "type": "object",
            "properties": {
                "city_id": {
                    "type": "string"
                },
                "continent_code": {
                    "type": "string"
                },
                "country_code": {
                    "type": "string"
                },
                "coverage_level": {
                    "description": "continent, country, region, city",
                    "type": "string"
                },
                "priority": {
                    "type": "integer"
                },
                "region": {
                    "type": "string"
                }
            }
        },
        "github_com_jcom-dev_zmanim-lab_internal_models.PublisherCoverageListResponse": {
            "type": "object",
            "properties": {
                "coverage": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_models.PublisherCoverage"
                    }
                },
                "total": {
                    "type": "integer"
                }
            }
        },
        "github_com_jcom-dev_zmanim-lab_internal_models.PublisherCoverageUpdateRequest": {
            "type": "object",
            "properties": {
                "is_active": {
                    "type": "boolean"
                },
                "priority": {
                    "type": "integer"
                }
            }
        },
        "github_com_jcom-dev_zmanim-lab_internal_models.PublisherForCity": {
            "type": "object",
            "properties": {
                "coverage_level": {
                    "type": "string"
                },
                "match_type": {
                    "description": "exact_city, region_match, country_match",
                    "type": "string"
                },
                "priority": {
                    "type": "integer"
                },
                "publisher_id": {
                    "type": "string"
                },
                "publisher_name": {
                    "type": "string"
                }
            }
        },
        "github_com_jcom-dev_zmanim-lab_internal_models.PublisherProfileUpdateRequest": {
            "type": "object",
            "properties": {
                "bio": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "name": {
                    "description": "Publisher name is the organization name",
                    "type": "string"
                },
                "website": {
                    "type": "string"
                }
            }
        },
        "github_com_jcom-dev_zmanim-lab_internal_models.PublishersForCityResponse": {
            "type": "object",
            "properties": {
                "city_id": {
                    "type": "string"
                },
                "publishers": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_models.PublisherForCity"
                    }
                },
                "total": {
                    "type": "integer"
                }
            }
        },
        "github_com_jcom-dev_zmanim-lab_internal_models.ZmanimRequest": {
            "type": "object",
            "properties": {
                "date": {
                    "description": "YYYY-MM-DD format",
                    "type": "string"
                },
                "elevation": {
                    "type": "integer"
                },
                "latitude": {
                    "type": "number"
                },
                "longitude": {
                    "type": "number"
                },
                "publisher_id": {
                    "type": "string"
                },
                "timezone": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.APIError": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "string"
                },
                "details": {},
                "message": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.APIResponse": {
            "type": "object",
            "properties": {
                "data": {},
                "error": {
                    "$ref": "#/definitions/internal_handlers.APIError"
                },
                "meta": {
                    "$ref": "#/definitions/internal_handlers.ResponseMeta"
                }
            }
        },
        "internal_handlers.AdminCreateMasterZmanRequest": {
            "type": "object",
            "required": [
                "canonical_english_name",
                "canonical_hebrew_name",
                "default_formula_dsl",
                "time_category",
                "zman_key"
            ],
            "properties": {
                "canonical_english_name": {
                    "type": "string"
                },
                "canonical_hebrew_name": {
                    "type": "string"
                },
                "default_formula_dsl": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "halachic_notes": {
                    "type": "string"
                },
                "halachic_source": {
                    "type": "string"
                },
                "is_core": {
                    "type": "boolean"
                },
                "is_hidden": {
                    "type": "boolean"
                },
                "tag_ids": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "time_category": {
                    "type": "string"
                },
                "transliteration": {
                    "type": "string"
                },
                "zman_key": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.AdminMasterZman": {
            "type": "object",
            "properties": {
                "canonical_english_name": {
                    "type": "string"
                },
                "canonical_hebrew_name": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "created_by": {
                    "type": "string"
                },
                "default_formula_dsl": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "halachic_notes": {
                    "type": "string"
                },
                "halachic_source": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "is_core": {
                    "type": "boolean"
                },
                "is_hidden": {
                    "type": "boolean"
                },
                "tag_ids": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "tags": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_handlers.ZmanTag"
                    }
                },
                "time_category": {
                    "type": "string"
                },
                "transliteration": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                },
                "updated_by": {
                    "type": "string"
                },
                "zman_key": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.AdminMasterZmanDetail": {
            "type": "object",
            "properties": {
                "canonical_english_name": {
                    "type": "string"
                },
                "canonical_hebrew_name": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "created_by": {
                    "type": "string"
                },
                "day_types": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_handlers.DayType"
                    }
                },
                "default_formula_dsl": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "halachic_notes": {
                    "type": "string"
                },
                "halachic_source": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "is_core": {
                    "type": "boolean"
                },
                "is_hidden": {
                    "type": "boolean"
                },
                "tag_ids": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "tags": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_handlers.ZmanTag"
                    }
                },
                "time_category": {
                    "type": "string"
                },
                "transliteration": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                },
                "updated_by": {
                    "type": "string"
                },
                "zman_key": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.AdminUpdateMasterZmanRequest": {
            "type": "object",
            "properties": {
                "canonical_english_name": {
                    "type": "string"
                },
                "canonical_hebrew_name": {
                    "type": "string"
                },
                "default_formula_dsl": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "halachic_notes": {
                    "type": "string"
                },
                "halachic_source": {
                    "type": "string"
                },
                "is_core": {
                    "type": "boolean"
                },
                "is_hidden": {
                    "type": "boolean"
                },
                "tag_ids": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "time_category": {
                    "type": "string"
                },
                "transliteration": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.ApprovedTagResponse": {
            "type": "object",
            "properties": {
                "display_name_english": {
                    "type": "string"
                },
                "display_name_hebrew": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "tag_key": {
                    "type": "string"
                },
                "tag_type": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.AstronomicalPrimitive": {
            "type": "object",
            "properties": {
                "calculation_type": {
                    "type": "string"
                },
                "category": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "display_name": {
                    "type": "string"
                },
                "edge_type": {
                    "type": "string"
                },
                "formula_dsl": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "is_dawn": {
                    "type": "boolean"
                },
                "solar_angle": {
                    "type": "number"
                },
                "sort_order": {
                    "type": "integer"
                },
                "variable_name": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.AstronomicalPrimitivesGrouped": {
            "type": "object",
            "properties": {
                "category": {
                    "type": "string"
                },
                "display_name": {
                    "type": "string"
                },
                "primitives": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_handlers.AstronomicalPrimitive"
                    }
                }
            }
        },
        "internal_handlers.CreateZmanFromRegistryRequest": {
            "type": "object",
            "required": [
                "master_zman_id"
            ],
            "properties": {
                "formula_dsl": {
                    "description": "Optional override",
                    "type": "string"
                },
                "master_zman_id": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.CreateZmanRegistryRequestBody": {
            "type": "object",
            "required": [
                "description",
                "requested_english_name",
                "requested_hebrew_name",
                "requested_key",
                "time_category"
            ],
            "properties": {
                "auto_add_on_approval": {
                    "type": "boolean"
                },
                "description": {
                    "type": "string"
                },
                "halachic_notes": {
                    "type": "string"
                },
                "halachic_source": {
                    "type": "string"
                },
                "requested_english_name": {
                    "type": "string"
                },
                "requested_formula_dsl": {
                    "type": "string"
                },
                "requested_hebrew_name": {
                    "type": "string"
                },
                "requested_key": {
                    "type": "string"
                },
                "requested_new_tags": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "name": {
                                "type": "string"
                            },
                            "type": {
                                "type": "string"
                            }
                        }
                    }
                },
                "tag_ids": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "time_category": {
                    "type": "string"
                },
                "transliteration": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.CreateZmanRequest": {
            "type": "object",
            "required": [
                "english_name",
                "formula_dsl",
                "hebrew_name",
                "zman_key"
            ],
            "properties": {
                "ai_explanation": {
                    "type": "string"
                },
                "english_name": {
                    "type": "string"
                },
                "formula_dsl": {
                    "type": "string"
                },
                "hebrew_name": {
                    "type": "string"
                },
                "is_enabled": {
                    "type": "boolean"
                },
                "is_visible": {
                    "type": "boolean"
                },
                "publisher_comment": {
                    "type": "string"
                },
                "zman_key": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.DSLPreviewRequest": {
            "type": "object",
            "properties": {
                "date": {
                    "description": "ISO 8601 date (YYYY-MM-DD)",
                    "type": "string"
                },
                "elevation": {
                    "description": "Optional elevation in meters",
                    "type": "number"
                },
                "formula": {
                    "type": "string"
                },
                "latitude": {
                    "description": "Direct coordinates",
                    "type": "number"
                },
                "location_id": {
                    "description": "Optional: city/location ID",
                    "type": "string"
                },
                "longitude": {
                    "type": "number"
                },
                "timezone": {
                    "description": "e.g., \"America/New_York\"",
                    "type": "string"
                }
            }
        },
        "internal_handlers.DSLPreviewResponse": {
            "type": "object",
            "properties": {
                "breakdown": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_dsl.CalculationStep"
                    }
                },
                "result": {
                    "description": "Formatted time (HH:MM:SS)",
                    "type": "string"
                },
                "timestamp": {
                    "description": "Unix timestamp",
                    "type": "integer"
                }
            }
        },
        "internal_handlers.DSLPreviewWeekRequest": {
            "type": "object",
            "properties": {
                "elevation": {
                    "type": "number"
                },
                "formula": {
                    "type": "string"
                },
                "latitude": {
                    "description": "Direct coordinates",
                    "type": "number"
                },
                "location_id": {
                    "description": "Optional: city/location ID",
                    "type": "string"
                },
                "longitude": {
                    "type": "number"
                },
                "start_date": {
                    "description": "ISO 8601 date (YYYY-MM-DD)",
                    "type": "string"
                },
                "timezone": {
                    "description": "e.g., \"America/New_York\"",
                    "type": "string"
                }
            }
        },
        "internal_handlers.DSLPreviewWeekResponse": {
            "type": "object",
            "properties": {
                "days": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_handlers.DayPreview"
                    }
                }
            }
        },
        "internal_handlers.DSLValidateRequest": {
            "type": "object",
            "properties": {
                "formula": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.DSLValidateResponse": {
            "type": "object",
            "properties": {
                "dependencies": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "errors": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/github_com_jcom-dev_zmanim-lab_internal_dsl.ValidationError"
                    }
                },
                "valid": {
                    "type": "boolean"
                }
            }
        },
        "internal_handlers.DayPreview": {
            "type": "object",
            "properties": {
                "date": {
                    "description": "YYYY-MM-DD",
                    "type": "string"
                },
                "events": {
                    "description": "Jewish holidays, Shabbat, etc.",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "hebrew_date": {
                    "description": "Hebrew date string",
                    "type": "string"
                },
                "is_shabbat": {
                    "type": "boolean"
                },
                "is_yom_tov": {
                    "type": "boolean"
                },
                "result": {
                    "description": "Calculated time HH:MM:SS",
                    "type": "string"
                },
                "sunrise": {
                    "description": "HH:MM:SS",
                    "type": "string"
                },
                "sunset": {
                    "description": "HH:MM:SS",
                    "type": "string"
                }
            }
        },
        "internal_handlers.DayType": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "display_name_english": {
                    "type": "string"
                },
                "display_name_hebrew": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "parent_type": {
                    "type": "string"
                },
                "sort_order": {
                    "type": "integer"
                }
            }
        },
        "internal_handlers.DeletedZman": {
            "type": "object",
            "properties": {
                "deleted_at": {
                    "type": "string"
                },
                "deleted_by": {
                    "type": "string"
                },
                "english_name": {
                    "type": "string"
                },
                "formula_dsl": {
                    "type": "string"
                },
                "hebrew_name": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "master_zman_id": {
                    "type": "string"
                },
                "publisher_id": {
                    "type": "string"
                },
                "time_category": {
                    "type": "string"
                },
                "zman_key": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.FormulaDetails": {
            "type": "object",
            "properties": {
                "display_name": {
                    "type": "string"
                },
                "explanation": {
                    "type": "string"
                },
                "method": {
                    "type": "string"
                },
                "parameters": {
                    "type": "object",
                    "additionalProperties": true
                }
            }
        },
        "internal_handlers.MasterZman": {
            "type": "object",
            "properties": {
                "canonical_english_name": {
                    "type": "string"
                },
                "canonical_hebrew_name": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "day_types": {
                    "description": "Day types this zman applies to",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "default_formula_dsl": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "halachic_notes": {
                    "type": "string"
                },
                "halachic_source": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "is_core": {
                    "type": "boolean"
                },
                "tags": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_handlers.ZmanTag"
                    }
                },
                "time_category": {
                    "type": "string"
                },
                "transliteration": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                },
                "zman_key": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.MasterZmanimGrouped": {
            "type": "object",
            "properties": {
                "display_name": {
                    "type": "string"
                },
                "time_category": {
                    "type": "string"
                },
                "zmanim": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_handlers.MasterZman"
                    }
                }
            }
        },
        "internal_handlers.PublisherZman": {
            "type": "object",
            "properties": {
                "ai_explanation": {
                    "type": "string"
                },
                "category": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "dependencies": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "description": {
                    "type": "string"
                },
                "english_name": {
                    "type": "string"
                },
                "formula_dsl": {
                    "type": "string"
                },
                "hebrew_name": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "is_beta": {
                    "type": "boolean"
                },
                "is_custom": {
                    "type": "boolean"
                },
                "is_enabled": {
                    "type": "boolean"
                },
                "is_event_zman": {
                    "type": "boolean"
                },
                "is_linked": {
                    "type": "boolean"
                },
                "is_published": {
                    "type": "boolean"
                },
                "is_visible": {
                    "type": "boolean"
                },
                "linked_publisher_zman_id": {
                    "type": "string"
                },
                "linked_source_is_deleted": {
                    "type": "boolean"
                },
                "linked_source_publisher_name": {
                    "type": "string"
                },
                "master_zman_id": {
                    "description": "Linked zmanim support",
                    "type": "string"
                },
                "publisher_comment": {
                    "type": "string"
                },
                "publisher_id": {
                    "type": "string"
                },
                "source_description": {
                    "type": "string"
                },
                "source_english_name": {
                    "type": "string"
                },
                "source_formula_dsl": {
                    "type": "string"
                },
                "source_hebrew_name": {
                    "description": "Source/original values from registry or linked publisher (for diff/revert functionality)",
                    "type": "string"
                },
                "source_transliteration": {
                    "type": "string"
                },
                "source_type": {
                    "type": "string"
                },
                "tags": {
                    "description": "Tags from master zman",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_handlers.ZmanTag"
                    }
                },
                "time_category": {
                    "description": "For ordering (from registry)",
                    "type": "string"
                },
                "transliteration": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                },
                "zman_key": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.ResponseMeta": {
            "type": "object",
            "properties": {
                "request_id": {
                    "type": "string"
                },
                "timestamp": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.ReviewZmanRequestBody": {
            "type": "object",
            "required": [
                "status"
            ],
            "properties": {
                "reviewer_notes": {
                    "type": "string"
                },
                "status": {
                    "description": "\"approved\" or \"rejected\"",
                    "type": "string"
                }
            }
        },
        "internal_handlers.RollbackZmanRequest": {
            "type": "object",
            "required": [
                "version_number"
            ],
            "properties": {
                "version_number": {
                    "type": "integer"
                }
            }
        },
        "internal_handlers.UpdateZmanRequest": {
            "type": "object",
            "properties": {
                "ai_explanation": {
                    "type": "string"
                },
                "category": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "english_name": {
                    "type": "string"
                },
                "formula_dsl": {
                    "type": "string"
                },
                "hebrew_name": {
                    "type": "string"
                },
                "is_beta": {
                    "type": "boolean"
                },
                "is_enabled": {
                    "type": "boolean"
                },
                "is_published": {
                    "type": "boolean"
                },
                "is_visible": {
                    "type": "boolean"
                },
                "publisher_comment": {
                    "type": "string"
                },
                "transliteration": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.ValidateZmanKeyResponse": {
            "type": "object",
            "properties": {
                "available": {
                    "type": "boolean"
                },
                "reason": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.ZmanRegistryRequest": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "publisher_email": {
                    "type": "string"
                },
                "publisher_id": {
                    "type": "string"
                },
                "publisher_name": {
                    "type": "string"
                },
                "requested_english_name": {
                    "type": "string"
                },
                "requested_formula_dsl": {
                    "type": "string"
                },
                "requested_hebrew_name": {
                    "type": "string"
                },
                "requested_key": {
                    "type": "string"
                },
                "reviewed_at": {
                    "type": "string"
                },
                "reviewed_by": {
                    "type": "string"
                },
                "reviewer_notes": {
                    "type": "string"
                },
                "status": {
                    "type": "string"
                },
                "submitter_name": {
                    "type": "string"
                },
                "time_category": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.ZmanRequestTagResponse": {
            "type": "object",
            "properties": {
                "existing_tag_key": {
                    "type": "string"
                },
                "existing_tag_name": {
                    "type": "string"
                },
                "existing_tag_type": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "is_new_tag_request": {
                    "type": "boolean"
                },
                "request_id": {
                    "type": "string"
                },
                "requested_tag_name": {
                    "type": "string"
                },
                "requested_tag_type": {
                    "type": "string"
                },
                "tag_id": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.ZmanTag": {
            "type": "object",
            "properties": {
                "color": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "display_name_english": {
                    "type": "string"
                },
                "display_name_hebrew": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "sort_order": {
                    "type": "integer"
                },
                "tag_key": {
                    "description": "Unique key like \"is_candle_lighting\", \"is_havdalah\"",
                    "type": "string"
                },
                "tag_type": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.ZmanVersion": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "string"
                },
                "created_by": {
                    "type": "string"
                },
                "formula_dsl": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "publisher_zman_id": {
                    "type": "string"
                },
                "version_number": {
                    "type": "integer"
                }
            }
        },
        "internal_handlers.ZmanWithFormula": {
            "type": "object",
            "properties": {
                "formula": {
                    "$ref": "#/definitions/internal_handlers.FormulaDetails"
                },
                "is_beta": {
                    "type": "boolean"
                },
                "key": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "time": {
                    "type": "string"
                },
                "time_category": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.ZmanimLocationInfo": {
            "type": "object",
            "properties": {
                "city_id": {
                    "type": "string"
                },
                "city_name": {
                    "type": "string"
                },
                "country": {
                    "type": "string"
                },
                "latitude": {
                    "type": "number"
                },
                "longitude": {
                    "type": "number"
                },
                "region": {
                    "type": "string"
                },
                "timezone": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.ZmanimPublisherInfo": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "logo_url": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "internal_handlers.ZmanimWithFormulaResponse": {
            "type": "object",
            "properties": {
                "cached": {
                    "type": "boolean"
                },
                "cached_at": {
                    "type": "string"
                },
                "date": {
                    "type": "string"
                },
                "location": {
                    "$ref": "#/definitions/internal_handlers.ZmanimLocationInfo"
                },
                "publisher": {
                    "$ref": "#/definitions/internal_handlers.ZmanimPublisherInfo"
                },
                "zmanim": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_handlers.ZmanWithFormula"
                    }
                }
            }
        }
    },
    "securityDefinitions": {
        "BearerAuth": {
            "description": "JWT Bearer token from Clerk authentication",
            "type": "apiKey",
            "name": "Authorization",
            "in": "header"
        }
    }
}